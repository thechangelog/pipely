varnishtest "Test practical.ai redirects"

varnish v1 -vcl {
  vcl 4.1;

  include "disable-default-backend.vcl";
  include "practicalai.vcl";
} -start

# /practicalai/feed redirect
client c1 {
  txreq -url "/practicalai/feed"
  rxresp
  expect resp.status == 301
  expect resp.http.location == "https://feeds.transistor.fm/practical-ai-machine-learning-data-science-llm"
} -run

# /practicalai redirect
client c2 {
  txreq -url "/practicalai"
  rxresp
  expect resp.status == 301
  expect resp.http.location == "https://practicalai.fm"
} -run
